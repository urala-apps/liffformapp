<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LIFF 投票</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    .container {
      padding: 0;
    }

    /*メニューをページ下部に固定*/
    #sp-fixed-menu {
      position: fixed;
      width: 100%;
      bottom: 0px;
      font-size: 0;
      opacity: 0.9;
      z-index: 99;
    }

    /*メニューを横並びにする*/
    #sp-fixed-menu ul {
      display: flex;
      list-style: none;
      padding: 0;
      margin: 0;
      width: 100%;

      text-align: center;
    }

    #sp-fixed-menu li {
      justify-content: center;
      align-items: center;
      width: 50%;
      height: 20%;
      padding: 00;
      margin: 0 0 20px 0;
      font-size: 14px;
      /* border-right: 1px solid #fff; */
    }

    .btn-left {
      display: inline-block;
      border-radius: 5%;
      /* 角丸       */
      font-size: 18pt;
      /* 文字サイズ */
      text-align: center;
      /* 文字位置   */
      cursor: pointer;
      /* カーソル   */
      padding: 12px 12px;
      /* 余白       */
      background: #38b435;
      /* 背景色     */
      color: #ffffff;
      /* 文字色     */
      line-height: 1em;
      /* 1行の高さ  */
      transition: .3s;
      /* なめらか変化 */
      /* box-shadow    : 6px 6px 3px #666666;  影の設定 */
      border: 2px solid #38b435;
      /* 枠の指定 */
    }

    /*左側メニューをオレンジ色に*/
    .btn-right {
      display: inline-block;
      border-radius: 5%;
      /* 角丸       */
      font-size: 18pt;
      /* 文字サイズ */
      text-align: center;
      /* 文字位置   */
      cursor: pointer;
      /* カーソル   */
      padding: 12px 12px;
      /* 余白       */
      background: #f3a324;
      /* 背景色     */
      color: #ffffff;
      /* 文字色     */
      line-height: 1em;
      /* 1行の高さ  */
      transition: .3s;
      /* なめらか変化 */

      border: 2px solid #f3a324;
      /* 枠の指定 */
    }

    /*ボタンを調整*/
    #sp-fixed-menu li a {
      color: #fff;
      text-align: center;
      display: block;
      width: 100%;
      padding: 20px;
    }

    img {
      width: 100vw;
    }
  </style>

</head>

<body>
  <div class="container">
    <!-- 背景画像 -->
    <img
      src="https://urala-umeda.github.io/liffformapp/8fd9bc7d6f869c603f6cfca445d362a07d4a84ca-thumb-autox372-1834.jpg"
      alt="">

    <form id="sp-fixed-menu" class="for-sp">
      <!--       <input type="hidden" name="userId" value="ID00000"> -->
      <ul>
        <!-- <li><a href="#">お問い合わせ</a></li>
            <li><a href="#">資料請求</a></li> -->
      </ul>
    </form>

  </div>


  <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" crossorigin="anonymous"></script>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>

  <script>
    // liff.init({
    //   liffId: '2003690789-4xoj9DNp'
    // }).catch((err) => {
    //   console.log(err);
    // });

    // liff.ready.then(() => {
    //   if (!liff.isLoggedIn()) {
    //     liff.login();
    //   }
    //   const idToken = liff.getDecodedIDToken();
    //   const userId = idToken.sub;
    //   const userName = idToken.name;
    //   const userPic = idToken.picture;
    //   $('form').append(`<input type="hidden" name="userId" value="${userId}">`);
    //   $('form').append(`<input type="hidden" name="userName" value="${userName}">`);
    //   $('form').append(`<input type="hidden" name="userPic" value="${userPic}">`);
    //   $('ul').append('<li><input type="submit" id="submitBtn1" class="btn-left" name="voteLeft" value="左に投票"></li>');
    //   $('ul').append('<li><input type="submit" id="submitBtn2" class="btn-right" name="voteRight" value="右に投票"></li>');
    // });
    $('ul').append('<li><input type="submit" id="submitBtn1" class="btn-left" name="voteLeft" value="左に投票"></li>');
    $('ul').append('<li><input type="submit" id="submitBtn2" class="btn-right" name="voteRight" value="右に投票"></li>');


    $('form').submit(function (event) {
      event.preventDefault();

      var buttonText = $(this).find('input[type=submit]:focus').val();
      console.log(buttonText + ' ボタンが押されました');
      if (buttonText == "左に投票") {
        buttonText = "ケイジャンチキン"
      } else {
        buttonText = "クラブハウスサンド"
      }

      const shop = "ウララ";


      // alert(buttonText + "に投票しますか？");
      let data = $('form').serializeArray();
      data.push({ name: 'menu', value: buttonText });
      data.push({ name: 'shop', value: shop });

      $.post('https://script.google.com/macros/s/AKfycbybDXIRMjVeOkQ8x0DHwkpxykHFSJ8O-0_IVxICdLoowg9mxPrkvnpkim3Jqp1QNZSg/exec', data);

      // alert("投票しました！");
      Swal.fire({
        title: "投票完了！",
        text: buttonText + "に投票しました。",
        icon: "success"
      });
      // liff.closeWindow();
    });

    function sw() {
      Swal.fire("SweetAlert2 is working!");
    }

  </script>
</body>

</html>
